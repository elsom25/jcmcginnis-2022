<!DOCTYPE html>
<html lang="en-ca" class="scroll-smooth min-h-full antialiased">
  <head>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- Theme colors - brand terracotta -->
    <meta name="theme-color" content="#dd6557">
    <meta name="theme-color" content="#1a1614" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="view-transition" content="same-origin">
    <link rel="icon" href="<%= relative_url '/favicon.svg' %>">
    <link rel="mask-icon" href="<%= relative_url '/favicon.svg' %>" color="#dd6557">
    <link rel="apple-touch-icon" href="<%= relative_url '/apple-touch-icon' %>">
    <link rel="manifest" href="<%= relative_url '/manifest.json' %>">
    <!-- Fonts: preconnect to Google Fonts (Inter + Fraunces loaded in _head partial) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script>
      // Theme management - must be inline to prevent flash and be available for header toggle
      window.Theme = {
        get: () => localStorage.getItem('theme') || 'system',
        set: (theme) => { localStorage.setItem('theme', theme); Theme.apply(); },
        apply: () => {
          const theme = Theme.get();
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          document.documentElement.classList.toggle('dark', theme === 'dark' || (theme === 'system' && prefersDark));
        }
      };
      Theme.apply();
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', Theme.apply);
    </script>
    <%= live_reload_dev_js %>
    <%= render "head" %>
    <%= seo %>
    <%= render "social_meta", resource: resource %>
    <%= feed_meta %>
  </head>
  <body class="page flex min-h-full bg-bg-light text-stone-800 dark:bg-bg-dark dark:text-stone-200" id="page-top" data-page="<%= resource.data.page_id || (resource.respond_to?(:collection) && resource.collection&.label&.singularize) || 'default' %>">
    <div class="flex w-full">
      <%= yield %>
    </div>
  </body>
</html>
